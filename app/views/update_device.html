<div class="form-group">
  <h2> <b>Status</b> </h2>
  <toggle class="toggle float-left" ng-model="dataModel.active" ng-change="changed()" on="On" off="Off" onstyle="btn-info"></toggle>
</div>
<div style="clear:both; margin-bottom:30px;"></div>
<div class="device-list-header">
	<div class="float-left" style="font-size:30px;"><b>Update Device <span class="nice-blue-text">{{dataModel.device_tag}}</span></b></div>
	<button type="button" class="btn btn-info add-button" ng-click="update_device()"><b>Update</b></button>
</div>
<div class="alert-box" ng-show="alert.type">
	<div class="alert alert-success alert-dismissable" ng-if="alert.type=='success'">
	  <a ng-href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	  <strong>{{alert.message.strong}}</strong> {{alert.message.text}}
	</div>
	<div class="alert alert-warning alert-dismissable" ng-if="alert.type=='warning'">
	  <a ng-href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	  <strong>{{alert.message.strong}}</strong> {{alert.message.text}}
	</div>
	<div class="alert alert-danger alert-dismissable" ng-if="alert.type=='failed'">
	  <a ng-href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	  <strong>{{alert.message.strong}}</strong> {{alert.message.text}}
	</div>
</div>
<div class="form-group">
	<label for="app_name">App Name:</label>
	<select name="app_name" id="app_name" ng-model="dataModel.data.app_name">
		<option value="">---Please select---</option>
		<option ng-repeat="option in lists.apps" value="{{option}}">{{option}}</option>
	</select>
</div>

<div class="form-group">
  <label for="device_tag">Sender Tag:</label>
  <input type="text" class="form-control" id="device_tag" ng-model="dataModel.device_tag">
</div>
<div class="form-group">
  <label for="device_address">Sender Address:</label>
  <input type="text" class="form-control" id="device_address" ng-model="dataModel.device_address">
</div>
<!--
<div class="form-group">
  <label for="gateway_tag">Gateway Tag:</label>
  <input type="text" class="form-control" id="gateway_tag" ng-model="dataModel.gateway_tag">
</div>
<div class="form-group">
  <label for="gateway_address">Gateway Address:</label>
  <input type="text" class="form-control" id="gateway_address" ng-model="dataModel.gateway_address">
</div>
-->
<div class="form-group">
  <label for="network_id">Network ID:</label>
  <input type="text" class="form-control" id="network_id" ng-model="dataModel.network_id">
</div>
<div class="form-group">
	<label for="update_rate">Update Rate:</label>
	<select name="singleSelect2" id="singleSelect2" ng-model="dataModel.update_rate">
		<option value="">---Please select---</option>
		<option ng-repeat="option in lists.update_rate_options" value="{{option}}">{{option}} Seconds</option>
	</select>
</div>
<!--
<div class="device-select">
	<div class="form-group">
		<label for="update_rate">Sender Type :</label>
		<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.device_type_name" ng-click="reset_device_type()">
			<option value="">---Please select---</option>
		    <option ng-repeat="option in lists.device_types" value="{{option}}">{{option}}</option>
		</select>
		<select name="singleSelect3" id="singleSelect3" ng-model="dataModel.device_type">
			<option value="">---Please select---</option>
		    <option ng-repeat="option in lists.device_sub_types[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
		</select>
	</div>
</div>
-->

<span>
	<div class="var_list_container">
		<h2> <b>Var</b> </h2>
		<b>PV</b> <checkbox largest ng-model="dataModel.polling_info.PV.active" name="custom-name" ng-change="onChange('PV')" class="btn-default"></checkbox>
		<b>AP</b> <checkbox largest ng-model="dataModel.polling_info.AP.active" name="custom-name" ng-change="onChange('AP')" class="btn-default"></checkbox>
		<b>IR</b> <checkbox largest ng-model="dataModel.polling_info.IR.active" name="custom-name" ng-change="onChange('IR')" class="btn-default"></checkbox>
		<b>SD</b> <checkbox largest ng-model="dataModel.polling_info.SD.active" name="custom-name" ng-change="onChange('SD')" class="btn-default"></checkbox>
		<b>ED</b> <checkbox largest ng-model="dataModel.polling_info.ED.active" name="custom-name" ng-change="onChange('ED')" class="btn-default"></checkbox>
	</div>
	<div class="single_var_element" id="PV-section" ng-if="dataModel.polling_info.PV.active">
		<h2><b>PV</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">Data Type:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.PV.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.type.PV" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
	<div class="single_var_element" id="AP-section" ng-if="dataModel.polling_info.AP.active">
		<h2><b>PV</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">Image Size:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.AP.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.type.AP" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
	<div class="single_var_element" id="IR-section" ng-if="dataModel.polling_info.IR.active">
		<h2><b>IR</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">Infra Red Video Size:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.IR.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.type.IR" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
	<div class="single_var_element" id="SD-section" ng-if="dataModel.polling_info.SD.active">
		<h2><b>SD</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">Data Type:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.SD.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.type.SD" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
	<div class="single_var_element" id="ED-section" ng-if="dataModel.polling_info.ED.active">
		<h2><b>ED</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">Data Type:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.ED.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.type.ED" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
<!--
	<div class="single_var_element" id="PV-section" ng-if="dataModel.polling_info.PV.active">
		<h2><b>PV</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">dv_unit:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.PV.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.units[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_value">dv_value:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.PV.dv_value" ng-click="onChange()">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_value_list[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_status">dv_status:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.PV.dv_status" ng-init="dataModel.polling_info.PV.dv_status">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_status_list" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
	
	<div class="single_var_element" id="SV-section" ng-if="dataModel.polling_info.AP.active">
		<h2><b>AP</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">dv_unit:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.AP.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.units[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_value">dv_value:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.AP.dv_value" ng-click="onChange()">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_value_list[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_status">dv_status:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.AP.dv_status">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_status_list" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
	
	<div class="single_var_element" id="TV-section" ng-if="dataModel.polling_info.IR.active">
		<h2><b>IR</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">dv_unit:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.IR.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.units[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_value">dv_value:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.IR.dv_value" ng-click="onChange()">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_value_list[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_status">dv_status:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.IR.dv_status">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_status_list" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
	
	<div class="single_var_element" id="QV-section" ng-if="dataModel.polling_info.SD.active">
		<h2><b>SD</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">dv_unit:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.SD.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.units[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_value">dv_value:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.SD.dv_value" ng-click="onChange()">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_value_list[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_status">dv_status:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.SD.dv_status">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_status_list" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
	
	<div class="single_var_element" id="DV-section" ng-if="dataModel.polling_info.ED.active">
		<h2><b>ED</b></h2>
	
		<div class="small-input float-left">
			<label for="dv_unit">dv_unit:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.ED.dv_unit">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.units[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_value">dv_value:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.ED.dv_value" ng-click="onChange()">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_value_list[dataModel.polling_info.device_type_name]" value="{{option}}">{{option}}</option>
			</select>
		</div>
	
		<div class="small-input float-left">
			<label for="dv_status">dv_status:</label>
			<select name="singleSelect" id="singleSelect" ng-model="dataModel.polling_info.ED.dv_status">
				<option value="">---Please select---</option>
				<option ng-repeat="option in lists.variable_status_list" value="{{option}}">{{option}}</option>
			</select>
		</div>
	</div>
-->
	
	<span>
		<div style="clear:both; margin-bottom:30px;"></div>
		<div class="var_list_container">
			<h2> <b>Override Global Settings?</b> </h2>
			<b>Yes please :)</b> <checkbox largest ng-model="dataModel.data.override_global_settings" name="custom-name" ng-change="onChange()" class="btn-default"></checkbox>
		</div>
		<div class="device-list-header" ng-if="dataModel.data.override_global_settings">
			<div class="float-left" style="font-size:30px;" ng-click="restoreSettings();"><b>Settings</b></div>
		</div>
		<span ng-repeat="(key,value) in lists.settings" ng-if="dataModel.data.override_global_settings">
			<div class="small-input float-left margin-bottom">
				<label for="{{key}}">{{key}}:</label>
				<input type="text" class="form-control" id="" ng-model="dataModel.data.settings[key]" value={{dataModel.data.settings[$index]}}>
			</div>
		</span>
		
	</span>

	
</span>
<div style="clear:both;"></div>


<div class="alert-box">
	<div class="alert alert-success alert-dismissable" ng-if="alert.type=='success'">
	  <a ng-href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	  <strong>{{alert.message.strong}}</strong> {{alert.message.text}}
	</div>
	<div class="alert alert-warning alert-dismissable" ng-if="alert.type=='warning'">
	  <a ng-href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	  <strong>{{alert.message.strong}}</strong> {{alert.message.text}}
	</div>
	<div class="alert alert-danger alert-dismissable" ng-if="alert.type=='failed'">
	  <a ng-href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	  <strong>{{alert.message.strong}}</strong> {{alert.message.text}}
	</div>
</div>

<div class="device-list-header">
	<button type="button" class="btn btn-info add-button" ng-click="update_device()"><b>Update</b></button>
	<button type="button" class="btn btn-danger add-button margin-right" ng-click="deleteDeviceInInternalServer()"><b>Delete</b></button>
</div>

<!--
<div>
	<h2 ng-click="getPollingDataLog();"> <b>Polling Data Log</b> </h2>
	<div class="overflow-box">
	<div style="border: 1px solid black; padding:5px;" ng-repeat="log in polling_data_log">
		<div ng-repeat="s_log in log">
			<div>
				<a href="" data-toggle="tooltip" title="{{s_log.algorithm}}">{{s_log.value}}</a>
			</div>
		</div>
	</div>
	</div>
</div>
-->
